"""
Django validation and HTML form handling.
"""

from django.core.exceptions import ValidationError  # NOQA
from django.forms.boundfield import *  # NOQA
from django.forms.fields import *  # NOQA
from django.forms.forms import *  # NOQA
from django.forms.formsets import *  # NOQA
from django.forms.models import *  # NOQA
from django.forms.widgets import *  # NOQA



class SelectWithHidden(Select):
    """
    Subclass of Django's select widget that allows hidding options.
    To hidden an option, pass a dict instead of a string for its label,
    of the form: {'label': 'option label', 'hidden': True}
    """

    def create_option(self, name, value, label, selected, index, subindex=None, attrs=None):
        hidden = False
        if isinstance(label, dict):
            label, hidden = label['label'], label['hidden']
        option_dict = super(SelectWithHidden, self).create_option(name, value, label, selected, index,
                                                                    subindex=subindex, attrs=attrs)
        if hidden:
            option_dict['attrs']['hidden'] = 'hidden'
        return option_dict
